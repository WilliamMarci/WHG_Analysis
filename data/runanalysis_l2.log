[INIT] Enhanced mask functions loaded successfully!
[INIT] Functions loaded successfully
[INIT] Utility functions loaded successfully!
[INIT] Analysis functions loaded successfully!
[SYSTEM] Starting background analysis...
[SYSTEM] Background events loaded successfully!
[SYSTEM] Starting event selection...
[GOODLEP] Processed 151534 electrons successfully
[GOODLEP] Processed 200031 muons successfully
[CUTTER] Signal Mask efficiency: 6.79%
[CUTTER] Signal Mask efficiency: 72.53%
[CUTTER] Signal Mask efficiency: 25.70%
[CUTTER] Signal Mask efficiency: 67.96%
[CUTTER] Signal Before cut: 500000 events, After cut: 1022 events
[GOODLEP] Processed 15580 electrons successfully
[GOODLEP] Processed 19193 muons successfully
[CUTTER] Signal2 Mask efficiency: 47.88%
[CUTTER] Signal2 Mask efficiency: 45.92%
[CUTTER] Signal2 Mask efficiency: 33.51%
[CUTTER] Signal2 Mask efficiency: 14.29%
[CUTTER] Signal2 Before cut: 220496 events, After cut: 3963 events
[GOODLEP] Processed 12182 electrons successfully
[GOODLEP] Processed 15771 muons successfully
[CUTTER] Bkg1 Mask efficiency: 48.09%
[CUTTER] Bkg1 Mask efficiency: 64.73%
[CUTTER] Bkg1 Mask efficiency: 41.12%
[CUTTER] Bkg1 Mask efficiency: 22.15%
[CUTTER] Bkg1 Before cut: 100000 events, After cut: 3487 events
[GOODLEP] Processed 13642 electrons successfully
[GOODLEP] Processed 17371 muons successfully
[CUTTER] Bkg2 Mask efficiency: 48.42%
[CUTTER] Bkg2 Mask efficiency: 62.35%
[CUTTER] Bkg2 Mask efficiency: 20.49%
[CUTTER] Bkg2 Mask efficiency: 24.51%
[CUTTER] Bkg2 Before cut: 100000 events, After cut: 1671 events
[GOODLEP] Processed 6056 electrons successfully
[GOODLEP] Processed 7371 muons successfully
[CUTTER] Bkg3 Mask efficiency: 45.24%
[CUTTER] Bkg3 Mask efficiency: 29.78%
[CUTTER] Bkg3 Mask efficiency: 1.43%
[CUTTER] Bkg3 Mask efficiency: 10.91%
[CUTTER] Bkg3 Before cut: 100000 events, After cut: 12 events
[GOODLEP] Processed 12056 electrons successfully
[GOODLEP] Processed 15349 muons successfully
[CUTTER] Bkg4 Mask efficiency: 50.48%
[CUTTER] Bkg4 Mask efficiency: 48.23%
[CUTTER] Bkg4 Mask efficiency: 1.52%
[CUTTER] Bkg4 Mask efficiency: 20.92%
[CUTTER] Bkg4 Before cut: 100000 events, After cut: 61 events
[SYSTEM] Event selection completed!
[SYSTEM] Starting event analysis...
[ANALYZE] Analyzing events with cut: Signal
[ANALYZE] Analyzed 1022 events with cut: Signal Done
[ANALYZE] Analyzing events with cut: Signal2
[ANALYZE] Analyzed 3963 events with cut: Signal2 Done
[ANALYZE] Analyzing events with cut: Bkg1
[ANALYZE] Analyzed 3487 events with cut: Bkg1 Done
[ANALYZE] Analyzing events with cut: Bkg2
[ANALYZE] Analyzed 1671 events with cut: Bkg2 Done
[ANALYZE] Analyzing events with cut: Bkg3
[ANALYZE] Analyzed 12 events with cut: Bkg3 Done
[ANALYZE] Analyzing events with cut: Bkg4
[ANALYZE] Analyzed 61 events with cut: Bkg4 Done
[SYSTEM] Event analysis completed!
[SYSTEM] Saving results...
[CUTTER-L2] Applying cut: Signal
[CUTTER-L2] Applying cut: Signal2
[CUTTER-L2] Applying cut: Bkg1
[CUTTER-L2] Applying cut: Bkg2
[CUTTER-L2] Applying cut: Bkg3
[CUTTER-L2] Applying cut: Bkg4
[SYSTEM] L2 event selection completed!
[SYSTEM] Analyzing L2 events...
[ANALYZE] Analyzing events with cut: Signal_L2
[ANALYZE] Analyzed 247 events with cut: Signal_L2 Done
[ANALYZE] Analyzing events with cut: Signal2_L2
[ANALYZE] Analyzed 1311 events with cut: Signal2_L2 Done
[ANALYZE] Analyzing events with cut: Bkg1_L2
[ANALYZE] Analyzed 1415 events with cut: Bkg1_L2 Done
[ANALYZE] Analyzing events with cut: Bkg2_L2
[ANALYZE] Analyzed 343 events with cut: Bkg2_L2 Done
[ANALYZE] Analyzing events with cut: Bkg3_L2
[WARNING] No events pass the cut: Bkg3_L2
[ANALYZE] Analyzing events with cut: Bkg4_L2
[ANALYZE] Analyzed 1 events with cut: Bkg4_L2 Done
[SYSTEM] L2 event analysis completed!
[SYSTEM] Saving results...
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Signal_L2.parquet
[SAVE] Shape: (247, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Signal2_L2.parquet
[SAVE] Shape: (1311, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg1_L2.parquet
[SAVE] Shape: (1415, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg2_L2.parquet
[SAVE] Shape: (343, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] No results to save for cut: Bkg3_L2
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg4_L2.parquet
[SAVE] Shape: (1, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SYSTEM] L2 results saved successfully!
[SYSTEM] Saving initial results...
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Signal.parquet
[SAVE] Shape: (1022, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Signal2.parquet
[SAVE] Shape: (3963, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg1.parquet
[SAVE] Shape: (3487, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg2.parquet
[SAVE] Shape: (1671, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg3.parquet
[SAVE] Shape: (12, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SAVE] Converting results to DataFrame...
[SAVE] DataFrame saved to: data/analysis_Bkg4.parquet
[SAVE] Shape: (61, 9), Columns: ['W_mass', 'BB_mass', 'BBA_mass', 'Njet', 'dB_delta_r', 'dB_delta_eta', 'dB_delta_phi', 'bP_delta_r', 'photon_energy']
[SYSTEM] Results saved successfully!
[SYSTEM] Exiting background analysis script...
